(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["usuarios"],{"2bfd":function(e,t,n){},"4bd4":function(e,t,n){"use strict";n("4de4"),n("7db0"),n("4160"),n("caad"),n("07ac"),n("2532"),n("159b");var a=n("5530"),i=n("58df"),r=n("7e2b"),s=n("3206");t["a"]=Object(i["a"])(r["a"],Object(s["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,n=function(e){return e.$watch("hasError",(function(n){t.$set(t.errorBag,e._uid,n)}),{immediate:!0})},a={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",(function(i){i&&(t.errorBag.hasOwnProperty(e._uid)||(a.valid=n(e)))})):a.valid=n(e),a},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var n=this.watchers.find((function(e){return e._uid===t._uid}));n&&(n.valid(),n.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(a["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"83c0":function(e,t,n){"use strict";t["a"]={methods:{updateList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"btn-refresh-list";document.getElementById(e)&&document.getElementById(e).dispatchEvent(new window.Event("click",{cancelable:!0}))}}}},c6a6:function(e,t,n){"use strict";n("4de4"),n("7db0"),n("c975"),n("d81d"),n("45fc"),n("498a");var a=n("5530"),i=(n("2bfd"),n("b974")),r=n("8654"),s=n("80d2"),o=Object(a["a"])(Object(a["a"])({},i["b"]),{},{offsetY:!0,offsetOverflow:!0,transition:!1});t["a"]=i["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:function(e,t,n){return n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:i["a"].options.props.menuProps.type,default:function(){return o}},noFilter:Boolean,searchInput:{type:String,default:void 0}},data:function(){return{lazySearch:this.searchInput}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},i["a"].options.computed.classes.call(this)),{},{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems:function(){return this.filteredItems},selectedValues:function(){var e=this;return this.selectedItems.map((function(t){return e.getValue(t)}))},hasDisplayedItems:function(){var e=this;return this.hideSelected?this.filteredItems.some((function(t){return!e.hasItem(t)})):this.filteredItems.length>0},currentRange:function(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems:function(){var e=this;return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((function(t){return e.filter(t,String(e.internalSearch),String(e.getText(t)))}))},internalSearch:{get:function(){return this.lazySearch},set:function(e){this.lazySearch=e,this.$emit("update:search-input",e)}},isAnyValueAllowed:function(){return!1},isDirty:function(){return this.searchIsDirty||this.selectedItems.length>0},isSearching:function(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps:function(){var e=i["a"].options.computed.$_menuProps.call(this);return e.contentClass="v-autocomplete__content ".concat(e.contentClass||"").trim(),Object(a["a"])(Object(a["a"])({},o),e)},searchIsDirty:function(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem:function(){var e=this;return this.multiple?null:this.selectedItems.find((function(t){return e.valueComparator(e.getValue(t),e.getValue(e.internalValue))}))},listData:function(){var e=i["a"].options.computed.listData.call(this);return e.props=Object(a["a"])(Object(a["a"])({},e.props),{},{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused:function(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive:function(e){!e&&this.hasSlot&&(this.lazySearch=void 0)},items:function(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput:function(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created:function(){this.setSearch()},methods:{onFilteredItemsChanged:function(e,t){var n=this;e!==t&&(this.setMenuIndex(-1),this.$nextTick((function(){n.internalSearch&&(1===e.length||n.autoSelectFirst)&&(n.$refs.menu.getTiles(),n.setMenuIndex(0))})))},onInternalSearchChanged:function(){this.updateMenuDimensions()},updateMenuDimensions:function(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex:function(e){this.searchIsDirty||(this.multiple&&e===s["v"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===s["v"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==s["v"].backspace&&e!==s["v"].delete||this.deleteCurrentItem())},deleteCurrentItem:function(){if(!this.readonly){var e=this.selectedItems.length-1;if(-1!==this.selectedIndex){var t=this.selectedItems[this.selectedIndex];if(!this.getDisabled(t)){var n=this.selectedIndex===e?this.selectedIndex-1:this.selectedItems[this.selectedIndex+1]?this.selectedIndex:-1;-1===n?this.setValue(this.multiple?[]:void 0):this.selectItem(t),this.selectedIndex=n}}else this.selectedIndex=e}},clearableCallback:function(){this.internalSearch=void 0,i["a"].options.methods.clearableCallback.call(this)},genInput:function(){var e=r["a"].options.methods.genInput.call(this);return e.data=e.data||{},e.data.attrs=e.data.attrs||{},e.data.attrs.autocomplete=e.data.attrs.autocomplete||"off",e.data.domProps=e.data.domProps||{},e.data.domProps.value=this.internalSearch,e},genInputSlot:function(){var e=i["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections:function(){return this.hasSlot||this.multiple?i["a"].options.methods.genSelections.call(this):[]},onClick:function(){this.isDisabled||(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.activateMenu())},onInput:function(e){if(!(this.selectedIndex>-1)&&e.target){var t=e.target,n=t.value;t.value&&this.activateMenu(),this.internalSearch=n,this.badInput=t.validity&&t.validity.badInput}},onKeyDown:function(e){var t=e.keyCode;i["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown:function(e){},onTabDown:function(e){i["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown:function(){this.activateMenu()},selectItem:function(e){i["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems:function(){i["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch:function(){var e=this;this.$nextTick((function(){e.multiple&&e.internalSearch&&e.isMenuActive||(e.internalSearch=!e.selectedItems.length||e.multiple||e.hasSlot?null:e.getText(e.selectedItem))}))},updateSelf:function(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem:function(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy:function(e){if(-1!==this.selectedIndex){var t=this.selectedItems[this.selectedIndex],n=this.getText(t);e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",n),e.preventDefault()}}}})},d265:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user--crud"},[n("crud-table",{attrs:{headers:e.headers,url:e.url,filters:e.filters,widthModal:750,order:e.order,custom:!0},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",[e._v(e._s(t.items.Nombre))]),n("td",[e._v(e._s(t.items.Paterno))]),n("td",[e._v(e._s(t.items.Materno))]),n("td",[e._v(e._s(t.items.Interno))]),n("td",[e._v(e._s(t.items.WB))]),n("td",[e._v(e._s(t.items.Ciudad))]),n("td",[e._v(e._s(e.getRol(t)))]),n("td",[n("v-tooltip",{attrs:{bottom:"",color:"secondary"},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-btn",e._g({attrs:{icon:""},on:{click:function(n){return e.showForm(t)}}},i),[n("v-icon",{attrs:{color:"secondary"}},[e._v("edit")])],1)]}}],null,!0)},[n("span",[e._v("Editar usuario")])]),n("v-tooltip",{attrs:{bottom:"",color:"error"},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-btn",e._g({attrs:{icon:""},on:{click:function(n){return e.deleteUser(t)}}},i),[n("v-icon",{attrs:{color:"error"}},[e._v("delete_forever")])],1)]}}],null,!0)},[n("span",[e._v("Eliminar usuario")])])],1)])]}}])},[n("template",{slot:"buttons"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"ml-3",attrs:{slot:"activator",color:"primary",dark:"",text:""},nativeOn:{click:function(t){return t.stopPropagation(),e.createNewUser(t)}},slot:"activator"},a),[n("v-icon",{staticClass:"mr-2",attrs:{dark:""}},[e._v("person_add")]),e._v("Agregar Usuario ")],1)]}}])},[n("span",[e._v("Agregar usuario")])])],1)],2),n("v-dialog",{attrs:{persistent:"",width:"450"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.itemSeleccionado?"Editar usuario":"Agregar usuario"))])]),n("v-card-text",[n("v-container",[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.sendData(t)}}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{staticClass:"mb-2",attrs:{color:"primary",label:"Nombres",outlined:"","hide-details":"",dense:"",rules:[function(e){return!!e||"No puede estar vacio"}],required:""},model:{value:e.form.Nombre,callback:function(t){e.$set(e.form,"Nombre",t)},expression:"form.Nombre"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{staticClass:"mb-2",attrs:{color:"primary",label:"Apellido Paterno",outlined:"","hide-details":"",dense:"",required:""},model:{value:e.form.Paterno,callback:function(t){e.$set(e.form,"Paterno",t)},expression:"form.Paterno"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{staticClass:"mb-2",attrs:{color:"primary",label:"Apellido Materno",outlined:"","hide-details":"",dense:"",required:""},model:{value:e.form.Materno,callback:function(t){e.$set(e.form,"Materno",t)},expression:"form.Materno"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{staticClass:"mb-2",attrs:{color:"primary",label:"Interno",outlined:"","hide-details":"",dense:"",rules:[function(e){return!!e||"No puede estar vacio"}],required:""},model:{value:e.form.Interno,callback:function(t){e.$set(e.form,"Interno",t)},expression:"form.Interno"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{staticClass:"mb-2",attrs:{color:"primary",label:"Número corporativo",outlined:"","hide-details":"",dense:"",rules:[function(e){return!!e||"No puede estar vacio"}],required:""},model:{value:e.form.WB,callback:function(t){e.$set(e.form,"WB",t)},expression:"form.WB"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{staticClass:"mb-2",attrs:{label:"Telefono/Celular",rules:[function(e){return!!e||"El campo no puede estar vacio"}],"hide-details":"",dense:"",outlined:""},model:{value:e.form.Celular,callback:function(t){e.$set(e.form,"Celular",t)},expression:"form.Celular"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{staticClass:"mb-2",attrs:{label:"Correo electrónico","hide-details":"",dense:"",outlined:"",rules:[function(e){return!!e||"No puede estar vacio"}]},model:{value:e.form.Correo,callback:function(t){e.$set(e.form,"Correo",t)},expression:"form.Correo"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{staticClass:"mb-2",attrs:{label:"Ciudad",rules:[function(e){return!!e||"El campo no puede estar vacio"}],"hide-details":"",dense:"",outlined:""},model:{value:e.form.Ciudad,callback:function(t){e.$set(e.form,"Ciudad",t)},expression:"form.Ciudad"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-autocomplete",{staticClass:"mb-2",attrs:{label:"Rol",rules:[function(e){return!!e||"El campo no puede estar vacio"}],"hide-details":"","item-text":"Rol","item-value":"id","no-data-text":"No existen registros",items:e.aRoles,clearable:"",dense:"",outlined:""},model:{value:e.form.id_rol,callback:function(t){e.$set(e.form,"id_rol",t)},expression:"form.id_rol"}})],1),n("v-col",{attrs:{cols:"12"}},[n("small",{staticClass:"red--text"},[e._v("* Todos los campos marcados son requeridos")])]),n("v-col",{attrs:{cols:"12"}},[n("v-card-actions",{staticClass:"mb-0 pb-0"},[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancelar")]),n("v-btn",{attrs:{type:"submit",color:"primary"}},[e._v("Guardar")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},i=[],r=(n("99af"),n("7db0"),n("ac1f"),n("1276"),n("3835")),s=n("5530"),o=(n("96cf"),n("1da1")),l=n("a5b9"),c=n("83c0"),u={mixins:[c["a"]],data:function(){return{dialog:null,mCalendar:null,minDate:void 0,maxDate:void 0,url:"usuarios",itemSeleccionado:null,order:["createdAt","DESC"],headers:[{text:"Nombres",align:"center",value:"Nombre"},{text:"Paterno",align:"center",value:"Paterno"},{text:"Materno",align:"center",value:"Materno"},{text:"Interno",align:"center",value:"Interno",sortable:!0},{text:"Número corporativo",align:"center",value:"WB",sortable:!0},{text:"Ciudad",align:"center",value:"Ciudad"},{text:"Rol",align:"center",value:"rol"},{text:"Acciones",divider:!1,sortable:!1,align:"center",value:"ACTIONS"}],breakpoints:["md","lg","xl"],menuDatepicker:null,form:{},filters:[],aRoles:[]}},watch:{mCalendar:function(e){this.form.fechaSeguimiento=this.formatDate(e)}},methods:{getRol:function(e){var t,n=e.items,a=this.aRoles.find((function(e){return e.id===n.id_rol}));return a&&(t=a.Rol),t},deleteUser:function(e){var t=this,n=e.items;this.$confirm("¿Desea eliminar el usuario?",Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$service.delete("usuario",{idUsuario:n.id});case 2:t.updateList(),t.$message.success("usuario exitosamente eliminado");case 4:case"end":return e.stop()}}),e)}))))},createNewUser:function(){this.form={},this.dialog=!0},sendData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.$refs.form.validate()){t.next=21;break}if(e.$waiting(!0,"Espere unos segundos por favor..."),!e.itemSeleccionado){t.next=11;break}return a=Object(s["a"])(Object(s["a"])({},e.form),{},{idUsuario:e.itemSeleccionado.id}),delete a.id,t.next=8,e.$service.put("usuario",a);case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,e.$service.post("usuario",Object(s["a"])({},e.form));case 13:n=t.sent;case 14:n.finalizado?e.$message.success("Registro exitosamente actualizado"):e.$message.error(n.mensaje),e.$waiting(!1),e.itemSeleccionado=null,e.dialog=!1,setTimeout((function(){e.updateList()}),100),t.next=23;break;case 21:e.$waiting(!1),e.$message.error("Faltan campos por llenar");case 23:t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](0),e.$waiting(!1);case 28:case"end":return t.stop()}}),t,null,[[0,25]])})))()},formatDate:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";if(!e)return null;if("-"===n){var a=e.split(n),i=Object(r["a"])(a,3),s=i[0],o=i[1],l=i[2];t="".concat(l,"/").concat(o,"/").concat(s)}else{var c=e.split(n),u=Object(r["a"])(c,3),d=u[0],h=u[1],m=u[2];t="".concat(m,"-").concat(h,"-").concat(d)}return t},cancelCall:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$service.put("estado-usuario",{idUser:e.$storage.getUser().id,libre:1,conectado:1});case 2:e.dialog=!1;case 3:case"end":return t.stop()}}),t)})))()},showForm:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.items,t.itemSeleccionado=a,t.form=t.itemSeleccionado,t.dialog=!0;case 4:case"end":return n.stop()}}),n)})))()}},components:{CrudTable:l["a"]},mounted:function(){var e=this;this.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$service.get("roles");case 2:e.aRoles=t.sent;case 3:case"end":return t.stop()}}),t)}))))}},d=u,h=(n("ff51"),n("2877")),m=n("6544"),f=n.n(m),p=n("c6a6"),v=n("8336"),g=n("b0af"),b=n("99d9"),x=n("62ad"),I=n("a523"),S=n("169a"),C=n("4bd4"),w=n("132d"),_=n("0fd9"),y=n("2fa4"),$=n("8654"),k=n("3a2f"),D=Object(h["a"])(d,a,i,!1,null,"6e35a4f5",null);t["default"]=D.exports;f()(D,{VAutocomplete:p["a"],VBtn:v["a"],VCard:g["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:x["a"],VContainer:I["a"],VDialog:S["a"],VForm:C["a"],VIcon:w["a"],VRow:_["a"],VSpacer:y["a"],VTextField:$["a"],VTooltip:k["a"]})},fe15:function(e,t,n){},ff51:function(e,t,n){"use strict";var a=n("fe15"),i=n.n(a);i.a}}]);